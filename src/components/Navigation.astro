---
const currentPath = Astro.url.pathname;
---

<nav class="navbar">
  <div class="container">
    <a href="/" class="nav-brand">
      <img src="/logo/Logo.jpeg" alt="London City FC Logo" class="logo-image" width="50" height="50" />
      <span class="brand-text">London City FC</span>
    </a>
    <ul class="nav-menu" id="nav-menu">
      <li>
        <a href="/" class={`nav-link ${currentPath === '/' ? 'active' : ''}`}>
          Home
        </a>
      </li>
      <li>
        <a href="/vision" class={`nav-link ${currentPath === '/vision' ? 'active' : ''}`}>
          Vision
        </a>
      </li>
      <li>
        <a href="/stadium" class={`nav-link ${currentPath === '/stadium' ? 'active' : ''}`}>
          Stadium
        </a>
      </li>
      <li>
        <a href="/contact" class={`nav-link ${currentPath === '/contact' ? 'active' : ''}`}>
          Contact
        </a>
      </li>
    </ul>
    <button class="menu-toggle" id="menu-toggle" aria-label="Toggle menu">
      <span></span>
      <span></span>
      <span></span>
    </button>
  </div>
</nav>

<script>
  // Menu mobile
  const menuToggle = document.getElementById('menu-toggle');
  const navMenu = document.getElementById('nav-menu');
  
  if (menuToggle && navMenu) {
    menuToggle.addEventListener('click', () => {
      navMenu.classList.toggle('active');
      menuToggle.classList.toggle('active');
      
      const spans = menuToggle.querySelectorAll('span');
      if (navMenu.classList.contains('active')) {
        spans[0].style.transform = 'rotate(45deg) translate(8px, 8px)';
        spans[1].style.opacity = '0';
        spans[2].style.transform = 'rotate(-45deg) translate(7px, -7px)';
      } else {
        spans[0].style.transform = 'none';
        spans[1].style.opacity = '1';
        spans[2].style.transform = 'none';
      }
    });
    
    // Fermer le menu lors du clic sur un lien
    const navLinks = navMenu.querySelectorAll('.nav-link');
    navLinks.forEach(link => {
      link.addEventListener('click', () => {
        navMenu.classList.remove('active');
        menuToggle.classList.remove('active');
        const spans = menuToggle.querySelectorAll('span');
        spans[0].style.transform = 'none';
        spans[1].style.opacity = '1';
        spans[2].style.transform = 'none';
      });
    });
    
    // Fermer le menu lors du clic en dehors
    document.addEventListener('click', (e) => {
      if (!navMenu.contains(e.target) && !menuToggle.contains(e.target)) {
        navMenu.classList.remove('active');
        menuToggle.classList.remove('active');
        const spans = menuToggle.querySelectorAll('span');
        spans[0].style.transform = 'none';
        spans[1].style.opacity = '1';
        spans[2].style.transform = 'none';
      }
    });
  }

  // Navbar scroll effect
  const navbar = document.querySelector('.navbar');
  if (navbar) {
    window.addEventListener('scroll', () => {
      const currentScroll = window.pageYOffset;
      
      if (currentScroll > 100) {
        navbar.style.boxShadow = '0 4px 20px rgba(2, 52, 106, 0.15)';
      } else {
        navbar.style.boxShadow = '0 2px 10px rgba(2, 52, 106, 0.1)';
      }
    });
  }

  // Scroll animations
  const observerOptions = {
    threshold: 0.1,
    rootMargin: '0px 0px -50px 0px'
  };
  
  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        entry.target.style.opacity = '1';
        entry.target.style.transform = 'translateY(0)';
      }
    });
  }, observerOptions);
  
  const sections = document.querySelectorAll('.content-section');
  sections.forEach(section => {
    section.style.opacity = '0';
    section.style.transform = 'translateY(20px)';
    section.style.transition = 'opacity 0.6s ease, transform 0.6s ease';
    observer.observe(section);
  });
</script>
